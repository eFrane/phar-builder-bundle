<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Symfony PharBuilder Bundle | PharBuilder</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.6d53293b.css" as="style"><link rel="preload" href="/assets/js/app.197ff4fa.js" as="script"><link rel="preload" href="/assets/js/2.bfc6d486.js" as="script"><link rel="preload" href="/assets/js/7.e136c063.js" as="script"><link rel="prefetch" href="/assets/js/10.1f83cda2.js"><link rel="prefetch" href="/assets/js/11.2efedc6d.js"><link rel="prefetch" href="/assets/js/3.21dc446c.js"><link rel="prefetch" href="/assets/js/4.406daf73.js"><link rel="prefetch" href="/assets/js/5.884781b4.js"><link rel="prefetch" href="/assets/js/6.b1533a7f.js"><link rel="prefetch" href="/assets/js/8.a3e8abce.js"><link rel="prefetch" href="/assets/js/9.4f67ab94.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6d53293b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" aria-current="page" class="home-link router-link-exact-active router-link-active"><!----> <span class="site-name">PharBuilder</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Symfony PharBuilder Bundle</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/#getting-started" class="sidebar-link">Getting Started</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/#adding-commands" class="sidebar-link">Adding Commands</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/#development-workflow" class="sidebar-link">Development Workflow</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/#developing-with-phar-build" class="sidebar-link">Developing with phar:build</a></li><li class="sidebar-sub-header"><a href="/#developing-with-phar-watch" class="sidebar-link">Developing with phar:watch</a></li></ul></li><li><a href="/#learn-more" class="sidebar-link">Learn More</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="symfony-pharbuilder-bundle"><a href="#symfony-pharbuilder-bundle" class="header-anchor">#</a> Symfony PharBuilder Bundle</h1> <p>The PharBuilder Bundle for <a href="https://symfony.com" target="_blank" rel="noopener noreferrer">Symfony<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> can help you develop and maintain Phars
built with the Symfony Framework. It internally uses <a href="https://github.com/box-project/box" target="_blank" rel="noopener noreferrer">Box<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to handle
the actual Phar stuff and is in effect not much more than a fancy Symfony integration for this
wonderful tool.</p> <p><em>This Bundle supports <strong>Symfony ≥ 5.1</strong> and <strong>PHP ≥ 7.3</strong></em></p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>Currently only CLI applications are supported. It is however planned to support both CLI and Web-facing
applications once this bundle reaches v1.0.</p></div> <h2 id="getting-started"><a href="#getting-started" class="header-anchor">#</a> Getting Started</h2> <p>First install the package with:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">composer</span> require efrane/phar-builder-bundle
</code></pre></div><p>Then activate it in your bundles configuration (typically <code>config/bundles.php</code>):</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">return</span> <span class="token punctuation">[</span>
    <span class="token comment">// ...</span>
    <span class="token class-name class-name-fully-qualified static-context">EFrane<span class="token punctuation">\</span>PharBuilder<span class="token punctuation">\</span>Bundle<span class="token punctuation">\</span>PharBuilderBundle</span><span class="token operator">::</span><span class="token keyword">class</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'all'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>Required configuration</strong></p> <p>The PharBuilder has several configuration options, most of which can be skipped for typical setups.
To get started, you only need to set a name for the generated phar and an output directory:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token comment"># config/packages/phar_builder.yaml</span>
<span class="token key atrule">phar_builder</span><span class="token punctuation">:</span>
    <span class="token key atrule">build</span><span class="token punctuation">:</span>
        <span class="token key atrule">output_path</span><span class="token punctuation">:</span> <span class="token string">'%kernel.project_dir%'</span>
        <span class="token key atrule">output_filename</span><span class="token punctuation">:</span> <span class="token string">'your-phar-name'</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Add the concatenation of <code>output_path</code> and <code>output_filename</code> to your <code>.gitignore</code>.</p></div> <p><strong>Build your Phar</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ php bin/console phar:build 
</code></pre></div><h2 id="adding-commands"><a href="#adding-commands" class="header-anchor">#</a> Adding Commands</h2> <p>The main idea behind this bundle is to enable developing a Phar that is separate from it's containing
Symfony application. To that extent, no commands registered to the Symfony console (<code>bin/console</code>)
are registered inside the Phar. Instead, you have to implement the
<code>EFrane\PharBuilder\Command\PharCommandInterface</code> on commands that shall be accessible in the Phar.</p> <p>The <code>EFrane\PharBuilder\Command\PharCommand</code> is a Symfony Command base class implementing that interface
to safe you some typing:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Command</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">EFrane<span class="token punctuation">\</span>PharBuilder<span class="token punctuation">\</span>Command<span class="token punctuation">\</span>PharCommand</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Symfony<span class="token punctuation">\</span>Component<span class="token punctuation">\</span>Console<span class="token punctuation">\</span>Input<span class="token punctuation">\</span>InputInterface</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Symfony<span class="token punctuation">\</span>Component<span class="token punctuation">\</span>Console<span class="token punctuation">\</span>Output<span class="token punctuation">\</span>OutputInterface</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">FooCommand</span> <span class="token keyword">extends</span> <span class="token class-name">PharCommand</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token variable">$defaultName</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'foo'</span><span class="token punctuation">;</span>

    <span class="token keyword">protected</span> <span class="token keyword">function</span> <span class="token function-definition function">execute</span><span class="token punctuation">(</span><span class="token class-name type-declaration">InputInterface</span> <span class="token variable">$input</span><span class="token punctuation">,</span> <span class="token class-name type-declaration">OutputInterface</span> <span class="token variable">$output</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">int</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$output</span><span class="token operator">-&gt;</span><span class="token function">writeln</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token class-name static-context">PharCommand</span><span class="token operator">::</span><span class="token constant">SUCCESS</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span> 
</span></code></pre></div><p>Alternatively, if you need access to commands registered by Symfony itself or other Bundles, you
need to tag the command classes with the <code>phar.command</code> tag.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>The <code>EFrane\PharBuilder\Command\PharCommandInterface</code> interface will <strong>never</strong> require the implementation
of any methods. It is purely used for command discovery.</p></div> <h2 id="development-workflow"><a href="#development-workflow" class="header-anchor">#</a> Development Workflow</h2> <p>Phars, unlike normal PHP Applications, need a more traditional development mindset as there always
is a build step and a run step. This bundle aims to make the transition from the instant run workflow
we're used to as PHP Developers to this other style of working as smooth as possible. To that end
the commands <code>phar:build</code> and <code>phar:watch</code> are provided.</p> <h3 id="developing-with-phar-build"><a href="#developing-with-phar-build" class="header-anchor">#</a> Developing with <code>phar:build</code></h3> <p>To build the Phar with the current configuration, simply run</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ php bin/console phar:build
</code></pre></div><p>To save some time and unnecessary network requests, you can skip downloading
the dependencies after the first run by using</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ php bin/console phar:build --no-update-dependencies
</code></pre></div><p>Remember that you need to rebuild the Phar after <strong>every</strong> change in the code if you want
to test that change.</p> <h3 id="developing-with-phar-watch"><a href="#developing-with-phar-watch" class="header-anchor">#</a> Developing with <code>phar:watch</code></h3> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>The watch command is a recent addition and may not work well yet in all circumstances.</p></div> <p>As going through the motions of the above described manual development cycle can
become quite tedious, a simpler alternative is offered:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ php bin/console phar:watch
</code></pre></div><p>Will watch for changes in PHP and Yaml files and trigger a build if necessary.
Note that, to save on resources, the change check is only done every ten seconds.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>You cannot start out with using <code>phar:watch</code> on a newly setup system as it runs
the builds without updating the dependencies. Always run a normal <code>phar:build</code> first.</p></div> <h2 id="learn-more"><a href="#learn-more" class="header-anchor">#</a> Learn More</h2> <ul><li><a href="/kernel.html">Customize the Application and Kernel</a></li> <li><a href="/debugging.html">Enable debugging features</a></li> <li><a href="/behind-the-scenes.html">How does it work behind the scenes?</a></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.197ff4fa.js" defer></script><script src="/assets/js/2.bfc6d486.js" defer></script><script src="/assets/js/7.e136c063.js" defer></script>
  </body>
</html>
